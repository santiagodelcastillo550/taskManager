<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Task Board</title>
    <link rel="stylesheet" th:href="@{/styles.css}">
</head>
<body class="board-body">

    <!-- Navbar board.html -->
	<div class="navbar">
	    <!-- Izquierda: título + botón Calendario -->
	    <div class="navbar-left" style="display: flex; align-items: center; gap: 10px;">
	        <h1 th:text="#{navbar.title}"></h1>
	        <form th:action="@{/board/calendar}" method="get">
	            <button type="submit" class="navbar-button" th:text="#{navbar.button.calendar}"></button>
	        </form>
	    </div>
	
	    <!-- Centro: botón Crear Tarea -->
	    <div class="navbar-center">
	        <button id="createTaskBtn" class="navbar-button" th:text="#{navbar.button.create}"></button>
	    </div>
	
	    <!-- Derecha: cerrar sesión -->
	    <div class="navbar-right">
	        <form th:action="@{/logout}" method="post" class="navbar-form">
	            <button type="submit" class="navbar-button" th:text="#{navbar.button.logout}"></button>
	        </form>
	    </div>
	</div>


    <div class="task-board">
        <!-- Columna PENDIENTE -->
        <div class="task-column pending">
            <h2 th:text="#{task.pendiente}"></h2>
            <div th:each="task : ${pendientes}" class="task-card" 
			     th:classappend="' priority-' + ${task.priority}"
			     th:attr="data-id=${task.id},
			              data-title=${task.title},
			              data-description=${task.description},
			              data-priority=${task.priority},
			              data-status=${task.status},
			              data-limitdate=${task.limitDate}">
			    <h4 th:text="${task.title}"></h4>
			    <p th:text="${task.description}"></p>
			    <p class="task-priority"><strong th:text="#{task.prioridad}"></strong> <span th:text="${task.priority}"></span></p>
			    <p class="task-date">Fecha límite:<span th:text="${task.limitDate}"></span></p>
			</div>

        </div>

        <!-- Columna EN PROCESO -->
        <div class="task-column in-progress">
            <h2 th:text="#{task.enProceso}"></h2>
            <div th:each="task : ${enProceso}" class="task-card" 
			     th:classappend="' priority-' + ${task.priority}"
			     th:attr="data-id=${task.id},
			              data-title=${task.title},
			              data-description=${task.description},
			              data-priority=${task.priority},
			              data-status=${task.status},
			              data-limitdate=${task.limitDate}">
			    <h4 th:text="${task.title}"></h4>
			    <p th:text="${task.description}"></p>
			    <p class="task-priority"><strong th:text="#{task.prioridad}"></strong> <span th:text="${task.priority}"></span></p>
			    <p class="task-date">Fecha límite:<span th:text="${task.limitDate}"></span></p>
			</div>
        </div>

        <!-- Columna COMPLETADA -->
        <div class="task-column completed">
            <h2 th:text="#{task.completada}"></h2>
            <div th:each="task : ${completadas}" class="task-card" 
			     th:classappend="' priority-' + ${task.priority}"
			     th:attr="data-id=${task.id},
			              data-title=${task.title},
			              data-description=${task.description},
			              data-priority=${task.priority},
			              data-status=${task.status},
			              data-limitdate=${task.limitDate}">
			    <h4 th:text="${task.title}"></h4>
			    <p th:text="${task.description}"></p>
			    <p class="task-priority"><strong th:text="#{task.prioridad}"></strong> <span th:text="${task.priority}"></span></p>
			    <p class="task-date">Fecha límite: <span th:text="${task.limitDate}"></span></p>
			</div>
        </div>
    </div>
    
    <!-- Incluir fragment modal CREAR -->
	<div th:replace="~{fragments/taskModal :: taskModal}"></div>
	<script th:src="@{/js/taskModal.js}"></script>
	
	<!-- Incluir fragment modal MODIFICAR -->
	<div th:replace="~{fragments/taskModalUpdate :: taskModalUpdate}"></div>
	<script th:src="@{/js/taskModalUpdate.js}"></script>
</body>
</html>
